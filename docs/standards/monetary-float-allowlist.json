{
  "description": "Approved baseline monetary-float findings. New findings fail CI.",
  "policy_version": "1.1.0",
  "generated_at": "2026-02-27T04:34:03Z",
  "allowlist": [
    {
      "finding": "scripts/check_monetary_float_usage.py:112:\"justification\": \"Temporary approved monetary float usage; migrate to Decimal.\",",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/cashflow_dto.py:11:amount: float",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/position_analytics_dto.py:13:amount: float",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/position_analytics_dto.py:52:weight: float",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-26"
    },
    {
      "finding": "src/services/query_service/app/dtos/position_analytics_dto.py:89:total_market_value: float = Field(..., alias=\"totalMarketValue\")",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-26"
    },
    {
      "finding": "src/services/query_service/app/dtos/position_dto.py:23:cost_basis: float = Field(",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/position_dto.py:26:cost_basis_local: Optional[float] = Field(",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/position_dto.py:58:cost_basis: float = Field(",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/position_dto.py:62:cost_basis_local: Optional[float] = Field(",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/simulation_dto.py:34:price: float | None = None",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/simulation_dto.py:35:amount: float | None = None",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/simulation_dto.py:52:price: float | None = None",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/simulation_dto.py:53:amount: float | None = None",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/simulation_dto.py:75:cost_basis: float | None = None",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/simulation_dto.py:76:cost_basis_local: float | None = None",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/transaction_dto.py:20:price: float",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/transaction_dto.py:21:gross_transaction_amount: float",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/transaction_dto.py:24:net_cost: Optional[float] = None",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/transaction_dto.py:27:net_cost_local: Optional[float] = None",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/transaction_dto.py:30:transaction_fx_rate: Optional[float] = None",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/valuation_dto.py:10:market_price: float | None",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/valuation_dto.py:13:market_value: float | None",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/dtos/valuation_dto.py:17:market_value_local: float | None",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/services/position_analytics_service.py:129:local=MonetaryAmount(amount=float(total_income_local), currency=currency),",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-26"
    },
    {
      "finding": "src/services/query_service/app/services/position_analytics_service.py:131:amount=float(total_income_base), currency=portfolio.base_currency",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-26"
    },
    {
      "finding": "src/services/query_service/app/services/position_analytics_service.py:149:amount=float(snapshot.market_value_local or 0), currency=currency",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-26"
    },
    {
      "finding": "src/services/query_service/app/services/position_analytics_service.py:152:amount=float(snapshot.market_value or 0), currency=portfolio.base_currency",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-26"
    },
    {
      "finding": "src/services/query_service/app/services/position_analytics_service.py:157:amount=float(snapshot.cost_basis_local or 0), currency=currency",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-26"
    },
    {
      "finding": "src/services/query_service/app/services/position_analytics_service.py:160:amount=float(snapshot.cost_basis or 0), currency=portfolio.base_currency",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-26"
    },
    {
      "finding": "src/services/query_service/app/services/position_analytics_service.py:165:amount=float(snapshot.unrealized_gain_loss_local or 0), currency=currency",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-26"
    },
    {
      "finding": "src/services/query_service/app/services/position_analytics_service.py:168:amount=float(snapshot.unrealized_gain_loss or 0),",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-26"
    },
    {
      "finding": "src/services/query_service/app/services/position_analytics_service.py:213:total_market_value=float(total_market_value_base),",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-26"
    },
    {
      "finding": "src/services/query_service/app/services/position_analytics_service.py:69:weight=float(market_value_base / total_market_value_base)",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-26"
    },
    {
      "finding": "src/services/query_service/app/services/simulation_service.py:111:\"cost_basis\": float(row.cost_basis) if row.cost_basis is not None else None,",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/services/simulation_service.py:112:\"cost_basis_local\": float(row.cost_basis_local)",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/services/simulation_service.py:188:magnitude = float(change.quantity or change.amount or 0.0)",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/services/simulation_service.py:213:price=(float(row.price) if row.price is not None else None),",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    },
    {
      "finding": "src/services/query_service/app/services/simulation_service.py:214:amount=(float(row.amount) if row.amount is not None else None),",
      "justification": "Temporary approved monetary float usage; migrate to Decimal.",
      "owner": "platform-governance",
      "review_by": "2026-08-24"
    }
  ]
}
